{% extends 'nav.html' %}
{% load static %}
    {% block styles %}
    <link rel="stylesheet" href="{% static 'index.css' %}">
    {% endblock styles %}

    {% block titulo %}
    <title>Trofico</title>
    {% endblock titulo %}


    {% block content %}

    <div>
        <section class="container" >
            {% for x in plantas %}
            <article class="row bg-body mt-5 rounded-3  ">
                <section class="col-sm-12 col-md-12 col-lg-4 col-xlg-4">
                    <img class="" src="{% static 'img/planta.webp' %}" alt="Imagen planta" style="width: 100%; object-fit: cover;">
                </section>
                <section id="chart-container" class="col-sm-12 col-md-12 col-lg-8 col-xlg-8 ">
                    <canvas id="chart"></canvas>
                </section>

                <section class="col-4 ">
                    <hr>
                        <p class="card-text"> <strong>Humedad:</strong> {{ultimo_registro.humedad}}% </p>
                        <p class="card-text"> <strong>Humedad Relativa:</strong> {{ultimo_registro.relativa|floatformat:0 }}% </p>
                        <p class="card-text"> <strong>Temperatura:</strong> {{ultimo_registro.temperatura|floatformat:0 }} CÂ° </p>
                    <hr>
                    <h5 class="card-title">{{ x.nombre }}</h5>
                    <p class="card-text">{{x.ubicacion}}</p>
                    <hr>
                    {% if ultimo_registro.humedad < x.valorMin %}
                    <div class="row">
                        <div class="col" style="text-align: center; align-items: center;">
                            <svg width="50px" height="50px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M9 17C9.85038 16.3697 10.8846 16 12 16C13.1154 16 14.1496 16.3697 15 17" stroke="red" stroke-width="1.5" stroke-linecap="round"></path> <ellipse cx="15" cy="10.5" rx="1" ry="1.5" fill="red"></ellipse> <ellipse cx="9" cy="10.5" rx="1" ry="1.5" fill="red"></ellipse> <path d="M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7" stroke="red" stroke-width="1.5" stroke-linecap="round"></path> </g></svg>
                            <p><small>necesito riego</small></p>
                        </div>
                    </div>
                    {% else %}
                    <div class="row">
                            <svg width="50px" height="50px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 16C9.85038 16.6303 10.8846 17 12 17C13.1154 17 14.1496 16.6303 15 16" stroke="green" stroke-width="1.5" stroke-linecap="round"/>
                            <path d="M16 10.5C16 11.3284 15.5523 12 15 12C14.4477 12 14 11.3284 14 10.5C14 9.67157 14.4477 9 15 9C15.5523 9 16 9.67157 16 10.5Z" fill="green"/>
                            <ellipse cx="9" cy="10.5" rx="1" ry="1.5" fill="green"/>
                            <path d="M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7" stroke="green" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        <div class="col" style="text-align: center; align-items: center;">
                            <p><small>No necesito riego</small></p>
                        </div>
                    </div>
                    {% endif %}
                </section>
                <section id="chart-container" class="col-8">
                    <hr>
                    <h5>Registro de Humedad</h5>
                    <ul class="list-group list-group-flush">
                        {% for i in registros%}
                        {% if i.planta_id == x.id %}
                        <li class="list-group-item">{{ i.fecha }} {{ i.humedad }}%</li>
                        {% endif %}
                        {% endfor %}
                    </ul>
                </section>
            </article>
        </section>
            {% endfor %}
    </div>    
        {% endblock content %}
    
    

